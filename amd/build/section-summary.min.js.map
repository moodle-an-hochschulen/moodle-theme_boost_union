{"version":3,"file":"section-summary.min.js","sources":["../src/section-summary.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Theme Boost Union - JS for topics course format addition to realize always visible section summary.\n *\n * @module     theme_boost_union/section-summary\n * @copyright  2023 Mario Wehr <m.wehr@fh-kaernten.at>\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\nimport $ from 'jquery';\n\nlet summarCtrlList;\n\n/**\n * Responsible for moving summary information to inner <-> outer place.\n */\nclass SummaryMoveController {\n    constructor(section, innerSummaryLoc) {\n        this.innerSummaryLoc = innerSummaryLoc;\n        const contentItem = section.querySelector('.course-content-item-content');\n        this.outerSummaryLoc = contentItem.nextElementSibling; // No need for query selector.\n\n        // If section is initial closed, move the summary content to the outer summary location.\n        if (!contentItem.classList.contains(\"show\")) {\n            $(this.outerSummaryLoc).hide();\n            this.moveContent(this.innerSummaryLoc, this.outerSummaryLoc);\n            $(this.outerSummaryLoc).fadeIn(500);\n        }\n\n        // Register for bootstrap collapse events.\n        $(contentItem).on('hide.bs.collapse', () => {\n            this.moveContent(this.innerSummaryLoc, this.outerSummaryLoc);\n        });\n        $(contentItem).on('show.bs.collapse', () => {\n            this.moveContent(this.outerSummaryLoc, this.innerSummaryLoc);\n        });\n    }\n\n    /**\n     * Moves all content from one to another.\n     * @param {HTMLElement} source\n     * @param {HTMLElement} target\n     */\n    moveContent(source, target) {\n        while (source.firstChild) {\n            // While there are child nodes in the source div, move them to the target div.\n            target.appendChild(source.firstChild);\n        }\n    }\n}\n\nexport const init = () => {\n    const sectionList = document.querySelectorAll('ul.topics li.section.course-section');\n    summarCtrlList = new Array(sectionList.length);\n    for (let idx = 0; idx < sectionList.length; idx++) {\n        const section = sectionList[idx];\n        const innerSummaryLoc = section.querySelector('.course-content-item-content .course-description-item.summarytext');\n        // Only create SummaryMoveController if inner summary content is present.\n        if (innerSummaryLoc) {\n            summarCtrlList[idx] = new SummaryMoveController(section, innerSummaryLoc);\n        }\n    }\n};\n"],"names":["summarCtrlList","SummaryMoveController","constructor","section","innerSummaryLoc","contentItem","querySelector","outerSummaryLoc","nextElementSibling","classList","contains","this","hide","moveContent","fadeIn","on","source","target","firstChild","appendChild","sectionList","document","querySelectorAll","Array","length","idx"],"mappings":";;;;;;;SAyBIA,0JAKEC,sBACFC,YAAYC,QAASC,sBACZA,gBAAkBA,sBACjBC,YAAcF,QAAQG,cAAc,qCACrCC,gBAAkBF,YAAYG,mBAG9BH,YAAYI,UAAUC,SAAS,8BAC9BC,KAAKJ,iBAAiBK,YACnBC,YAAYF,KAAKP,gBAAiBO,KAAKJ,qCAC1CI,KAAKJ,iBAAiBO,OAAO,0BAIjCT,aAAaU,GAAG,oBAAoB,UAC7BF,YAAYF,KAAKP,gBAAiBO,KAAKJ,wCAE9CF,aAAaU,GAAG,oBAAoB,UAC7BF,YAAYF,KAAKJ,gBAAiBI,KAAKP,oBASpDS,YAAYG,OAAQC,aACTD,OAAOE,YAEVD,OAAOE,YAAYH,OAAOE,2BAKlB,WACVE,YAAcC,SAASC,iBAAiB,uCAC9CtB,eAAiB,IAAIuB,MAAMH,YAAYI,YAClC,IAAIC,IAAM,EAAGA,IAAML,YAAYI,OAAQC,MAAO,OACzCtB,QAAUiB,YAAYK,KACtBrB,gBAAkBD,QAAQG,cAAc,qEAE1CF,kBACAJ,eAAeyB,KAAO,IAAIxB,sBAAsBE,QAASC"}