/**
 * Theme Boost Union - JS code which shows all fontawesome icons in a popover.
 *
 * @module     theme_boost_union/fontawesome-popover
 * @copyright  2023 bdecent GmbH <https://bdecent.de>
 * @copyright  based on code from theme_boost\footer-popover by Bas Brands.
 * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 */
define("theme_boost_union/fontawesome-popover",["jquery","theme_boost/popover","core/fragment","core/notification"],(function($,popover,Fragment,Notification){const SELECTORS_PICKERCONTAINER=".fontawesome-iconpicker-popover";var contextID;let pickerIsShown=!1;var SELECTBOX;const iconPicker=target=>{if(null==(SELECTBOX=document.querySelector(target)))return;(target=>{var input=document.createElement("input");input.setAttribute("type","text"),input.classList.add("fontawesome-autocomplete"),input.classList.add("form-control"),input.setAttribute("name","iconsearch"),""!=SELECTBOX.value&&(input.value=null!==SELECTBOX.querySelector("option[selected]")?SELECTBOX.querySelector("option[selected]").text:"");var wrapper=document.createElement("div");wrapper.classList.add("fontawesome-picker-container"),wrapper.append(input),document.querySelector(target).style.display="none",document.querySelector(target).parentNode.append(wrapper)})(target);const pickerInput=document.querySelector(target).parentNode.querySelector("input.fontawesome-autocomplete");null!=pickerInput?(Fragment.loadFragment("theme_boost_union","icons_list",contextID,{}).then((function(html){$(pickerInput).popover({content:html,html:!0,placement:"bottom",customClass:"fontawesome-picker",trigger:"click",sanitize:!1}),$(pickerInput).on("inserted.bs.popover",(function(){document.querySelector(".fontawesome-iconpicker-popover ul.fontawesome-icon-suggestions").querySelectorAll("li").forEach((li=>{li.addEventListener("click",(e=>{var target=e.target.closest("li"),value=target.getAttribute("data-value"),label=target.getAttribute("data-label");pickerInput.value=label,SELECTBOX.value=value||0,$(pickerInput).popover("hide")}))}))}))})).catch(Notification.exception),document.addEventListener("click",(e=>{pickerIsShown&&!e.target.closest(SELECTORS_PICKERCONTAINER)&&$(pickerInput).popover("hide")}),!0),document.addEventListener("keydown",(e=>{pickerIsShown&&"Escape"===e.key&&($(pickerInput).popover("hide"),pickerInput.focus())})),document.addEventListener("focus",(e=>{pickerIsShown&&!e.target.closest(SELECTORS_PICKERCONTAINER)&&$(pickerInput).popover("hide")}),!0),$(pickerInput).on("shown.bs.popover",(()=>{if(pickerIsShown=!0,""!=pickerInput.value){var iconSuggestion=document.querySelector(".fontawesome-iconpicker-popover ul.fontawesome-icon-suggestions");null!==iconSuggestion.querySelector('li[data-label="'+pickerInput.value+'"]')&&(iconSuggestion.querySelectorAll("li").forEach((li=>li.classList.remove("selected"))),iconSuggestion.querySelector('li[data-label="'+pickerInput.value+'"]').classList.add("selected"))}})),$(pickerInput).on("hide.bs.popover",(()=>{pickerIsShown=!1})),pickerInput.addEventListener("keyup",(function(e){(target=>{var filter=target.value.toLowerCase();SELECTBOX.value=filter||0;var ul=document.querySelector(".fontawesome-iconpicker-popover ul.fontawesome-icon-suggestions");if(null!=ul)for(var li=ul.querySelectorAll("li"),i=0;i<li.length;i++){var value=li[i].getAttribute("data-value"),label=li[i].getAttribute("data-label");value.toLowerCase().includes(filter)||label.toLowerCase().includes(filter)?li[i].style.display="inline-block":li[i].style.display="none"}})(e.target)}))):setTimeout((()=>iconPicker(target)),1e3)};return{init:(target,contextid)=>{contextID=contextid,iconPicker(target)}}}));

//# sourceMappingURL=fontawesome-popover.min.js.map