{"version":3,"file":"backtotopbutton.min.js","sources":["../src/backtotopbutton.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Theme Boost Union - JS code back to top button\n *\n * @module     theme_boost_union/backtotopbutton\n * @copyright  2022 Alexander Bias, lern.link GmbH <alexander.bias@lernlink.de>\n * @copyright  on behalf of Zurich University of Applied Sciences (ZHAW)\n * @copyright  based on code from theme_boost_campus by Kathrin Osswald.\n * @copyright  2024 University of Graz based on code/ideas of Mark Sharp <mark.sharp@solent.ac.uk>\n *             written 2022 for Solent University {@link https://www.solent.ac.uk}\n * @author     Andr√© Menrath <andre.menrath@uni-graz.at>\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\nimport {getString} from 'core/str';\n\n/**\n * Create the back-to-top button element.\n *\n * @param {string} backToTopString Aria text for the back-to-top button.\n */\nconst createBackToTopButton = (backToTopString) => {\n    let button = document.createElement('button');\n    button.id = 'back-to-top';\n    button.className = 'btn btn-icon bg-secondary icon-no-margin d-print-none';\n    button.setAttribute('aria-label', backToTopString);\n    button.innerHTML = '<i aria-hidden=\"true\" class=\"fa fa-chevron-up fa-fw\"></i>';\n    return button;\n};\n\n/**\n * Scroll event handler.\n * @param {element} button The back-to-top button.\n * @param {integer} scrollDistance Scroll distance from the top when to show the back-to-top button.\n */\nconst handleScroll = (button, scrollDistance) => {\n    button.style.display = document.documentElement.scrollTop > scrollDistance ? 'block' : 'none';\n};\n\n/**\n * Scroll to top behavior.\n *\n * @param {event} event\n */\nconst scrollToTop = (event) => {\n    event.preventDefault();\n    window.scrollTo({\n        top: 0,\n        left: 0,\n        behavior: 'smooth'\n    });\n};\n\n/**\n * Throttle function to limit calls.\n *\n * @param   {function} func  The function to throttle.\n * @param   {number}   limit The time interval in milliseconds to throttle the function.\n *\n * @returns {function}       The throttled function.\n */\nconst throttle = (func, limit) => {\n    let inThrottle = false;\n\n    return (...args) => {\n        if (!inThrottle) {\n            func.apply(this, args);\n            inThrottle = true;\n            setTimeout(() => {\n                inThrottle = false;\n            }, limit);\n        }\n    };\n};\n\n/**\n * Initial setup for the back to top button.\n */\nexport const init = async() => {\n    // Configuration value when to start showing the back-to-top button.\n    const scrollDistance = 220;\n\n    // Aria text used for the back-to-top button.\n    const backToTopString = await getString('backtotop', 'theme_boost_union');\n\n    // Create and add the back-to-top button to the DOM.\n    const footer = document.querySelector('#page-footer');\n    const button = createBackToTopButton(backToTopString);\n    footer.after(button);\n\n    // Add event listeners that toggle the visibility and the behavior of the back-to-top button.\n    const throttledScrollHandler = throttle(() => handleScroll(button, scrollDistance), 200);\n\n    document.addEventListener('scroll', throttledScrollHandler);\n    button.addEventListener('click', scrollToTop);\n};\n"],"names":["scrollToTop","event","preventDefault","window","scrollTo","top","left","behavior","async","backToTopString","footer","document","querySelector","button","createElement","id","className","setAttribute","innerHTML","createBackToTopButton","after","throttledScrollHandler","func","limit","inThrottle","args","apply","setTimeout","throttle","scrollDistance","style","display","documentElement","scrollTop","handleScroll","addEventListener"],"mappings":"8KA0DMA,YAAeC,QACjBA,MAAMC,iBACNC,OAAOC,SAAS,CACZC,IAAK,EACLC,KAAM,EACNC,SAAU,0BA6BEC,gBAKVC,sBAAwB,kBAAU,YAAa,qBAG/CC,OAASC,SAASC,cAAc,gBAChCC,OAlEqBJ,CAAAA,sBACvBI,OAASF,SAASG,cAAc,iBACpCD,OAAOE,GAAK,cACZF,OAAOG,UAAY,wDACnBH,OAAOI,aAAa,aAAcR,iBAClCI,OAAOK,UAAY,4DACZL,QA4DQM,CAAsBV,iBACrCC,OAAOU,MAAMP,cAGPQ,uBA9BO,EAACC,KAAMC,aAChBC,YAAa,SAEV,eACEA,WAAY,+BADVC,6CAAAA,2BAEHH,KAAKI,aAAYD,MACjBD,YAAa,EACbG,YAAW,KACPH,YAAa,IACdD,UAqBoBK,EAAS,IAxDvB,EAACf,OAAQgB,kBAC1BhB,OAAOiB,MAAMC,QAAUpB,SAASqB,gBAAgBC,UAAYJ,eAAiB,QAAU,QAuDzCK,CAAarB,OAXpC,MAW6D,KAEpFF,SAASwB,iBAAiB,SAAUd,wBACpCR,OAAOsB,iBAAiB,QAASnC"}