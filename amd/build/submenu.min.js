define("theme_boost_union/submenu",["exports","jquery","core/key_codes"],(function(_exports,_jquery,_key_codes){var obj;
/**
   * Theme Boost Union - JS code to initialize and handle events of the sub menus in smart menu.
   *
   * This AMD module is copied and modified from lib/amd/src/usermenu.js.
   *
   * @module     theme_boost_union/submenu
   * @copyright  2024 bdecent GmbH <https://bdecent.de>
   * @copyright  based on code from core/usermenu by Mihail Geshoski
   * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   */Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.default=void 0,_jquery=(obj=_jquery)&&obj.__esModule?obj:{default:obj};const Selectors={smartMenuCarousel:'[data-toggle="smartmenu-carousel"]',smartMenuCarouselClass:".theme-boost-union-smartmenu-carousel",smartMenuCarouselItem:'[data-toggle="smartmenu-carousel"] .carousel-item',smartMenuCarouselItemActive:'[data-toggle="smartmenu-carousel"] .carousel-item.active',smartMenuCarouselNavigationLink:'[data-toggle="smartmenu-carousel"] .carousel-navigation-link',smartMenuDropDownItems:"ul.dropdown-menu li.nav-item",dropDownMenu:".dropdown-menu",roleMenu:'[role="menu"]',attr:{smartMenuCarouselTargetAttr:"data-carousel-target-id",smartMenuCarouselNavigationClass:"carousel-navigation-link"},region:{dropDown:'[data-region="moredropdown"]'}};var _default={init:()=>{const smartMenus=document.querySelectorAll(Selectors.smartMenuCarouselClass);void 0!==smartMenus&&null!==smartMenus.length&&smartMenus.forEach((e=>(smartMenu=>{smartMenu.addEventListener("click",(e=>{e.target.matches(Selectors.smartMenuCarouselNavigationLink)&&carouselManagement(e)}),!0),smartMenu.addEventListener("keydown",(e=>{e.keyCode!==_key_codes.space&&e.keyCode!==_key_codes.enter||!e.target.matches(Selectors.smartMenuCarouselNavigationLink)||(e.preventDefault(),carouselManagement(e))}),!0);const carouselManagement=e=>{e.stopPropagation();const targetedCarouselItemId=e.target.dataset.carouselTargetId,targetedCarouselItem=smartMenu.querySelector("#"+targetedCarouselItemId),index=Array.from(targetedCarouselItem.parentNode.children).indexOf(targetedCarouselItem);(0,_jquery.default)(smartMenu.querySelector(Selectors.smartMenuCarousel)).carousel(index)};(0,_jquery.default)(Selectors.smartMenu).on("hide.bs.dropdown",(()=>{(0,_jquery.default)(smartMenu.querySelector(Selectors.smartMenuCarousel)).carousel(0)})),(0,_jquery.default)(Selectors.smartMenuCarousel).on("slid.bs.carousel",(()=>{const activeCarouselItem=smartMenu.querySelector(Selectors.smartMenuCarouselItemActive);null!==activeCarouselItem&&activeCarouselItem.focus()}))})(e))),(()=>{window.onresize=()=>initMoreMenuCardItem();const initMoreMenuCardItem=()=>{var primaryNav=document.querySelector(".primary-navigation ul.more-nav .dropdownmoremenu");null!==primaryNav&&registerMoreMenuCardItem(primaryNav);var menuBar=document.querySelector("nav.menubar ul.more-nav .dropdownmoremenu");null!==menuBar&&registerMoreMenuCardItem(menuBar)},registerMoreMenuCardItem=moreMenu=>{if(!(moreMenu.querySelectorAll(Selectors.smartMenuDropDownItems).length<=0)){var subMenuDropDownMenu=moreMenu.querySelectorAll(Selectors.dropDownMenu+" "+Selectors.dropDownMenu);null!==subMenuDropDownMenu&&Array.from(subMenuDropDownMenu).forEach((e=>e.classList.remove("show"))),moreMenu.removeEventListener("click",hideCardMenus,!0),moreMenu.addEventListener("click",hideCardMenus,!0),moreMenu.parentNode.querySelectorAll(".dropdown.card-dropdown")&&moreMenu.parentNode.querySelectorAll(".dropdown.card-dropdown").forEach((e=>{var cardDropDown=e.querySelector(Selectors.dropDownMenu);null!==cardDropDown&&(cardDropDown.style.removeProperty("width"),cardDropDown.style.removeProperty("left"),cardDropDown.style.removeProperty("right"))}));var parentMenu=moreMenu.parentNode;(0,_jquery.default)(parentMenu).on("shown.bs.dropdown",hideOpenMenus),(0,_jquery.default)(parentMenu).on("hidden.bs.dropdown",hideOpenMenus)}},hideOpenMenus=e=>{if(e.target.matches(".dropdownmoremenu")){var subMenuDropDownMenu=e.currentTarget.querySelectorAll(Selectors.dropDownMenu+" "+Selectors.dropDownMenu);null!==subMenuDropDownMenu&&Array.from(subMenuDropDownMenu).forEach((e=>e.classList.remove("show")))}},hideCardMenus=e=>{var moreMenu=e.target.closest(Selectors.region.dropDown);moreMenu&&moreMenu.querySelectorAll(Selectors.dropDownMenu)&&moreMenu.querySelectorAll(Selectors.dropDownMenu).forEach((dropdownmenu=>{e.target.isEqualNode(dropdownmenu.previousElementSibling)||e.target.matches(Selectors.smartMenuCarouselNavigationLink)||!e.target.matches(".dropdown-toggle.dropdown-item")||dropdownmenu.classList.remove("show"),e.target.isEqualNode(dropdownmenu.previousElementSibling)&&e.target.parentNode.matches(".dropdown.card-dropdown")&&updatePosition(e)}))},updatePosition=e=>{const innerMenu=e.target.parentNode.querySelector(Selectors.roleMenu);if(innerMenu){var rect=innerMenu.parentNode.closest(Selectors.dropDownMenu).getBoundingClientRect(),right=document.scrollingElement.clientWidth-rect.right;rect.left>=right?(innerMenu.style.width=rect.left+"px",innerMenu.style.left=0):(innerMenu.style.width=right+"px",innerMenu.style.left="inherit",innerMenu.style.right=0)}}})()}};return _exports.default=_default,_exports.default}));

//# sourceMappingURL=submenu.min.js.map